<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Системы счисления</title>

    <link rel="stylesheet" type="text/css" href="styles.css">

    <!-- MathJax for embedded LaTeX -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
    </script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

    <!-- Google code prettify (and a hack for displaying all line numbers). -->
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <style>
        .prettyprint ol.linenums > li { list-style-type: decimal; }
    </style>
</head>

<body>

<h1>Системы счисления</h1>

<h3>Системы счисления в задачах</h3>

<p>В задачах разных уровней сложности иногда встречаются системы счисления, но
чаще всего суть таких задач заключается не в переводе чисел из одной системы
в другую. Почти всегда эти задачи лучше характеризует другая тема. Это может быть
динамическое программирование, теория чисел, комбинаторика, да и любая другая.
Системы счисления в этих задачах представляют собой лишь элемент условия, но
не решения. Поэтому материал этой лекции стоит рассматривать лишь как
ознакомительный: для решения большинства задач на системы счисления его будет
недостаточно.</p>

<h3>Позиционные системы счисления</h3>

<p>Системы счисления, с которыми мы сталкиваемся повседневно &ndash; десятичная,
двоичная и шестнадцатеричная &ndash; являются т.н. позиционными системами счисления.
Позиционная система счисления характеризуется основанием &ndash; целым числом,
большим 1. Числа записываются как последовательность "цифр" (это могут быть как
привычные нам цифры, так и буквы и любые другие символы). Позиция цифры в числе
влияет на порядок, который она описывает (отсюда название "позиционные"). Значимость
(описываемый порядок) цифры повышается справа налево. Например, рассмотрим
запись "547" как число в позиционной системе с произвольным основанием $b$:</p>

$$547_b = 5 * b^2 + 4 * b^1 + 7 * b^0$$

<p>Как можно заметить, каждая цифра описывает коэффициент перед определённой
степенью основания. Давайте примем $b = 21$, и выразим значение этого числа
в десятичной системе счисления:</p>

$$547_{21} = 5 * 21^2 + 4 * 21^1 + 7 * 21^0 = 2205 + 84 + 7 = 2296_{10}$$

<p>В системе с основанием $b$ существуют "цифры" значениями от $0$ до $b - 1$.
Для "цифр" со значением больше $9$ традиционно используют латинские буквы.
Например, в шестнадцатиричной системе, также часто встречающейся в информатике,
используются буквы от $A$ до $F$ для "цифр" от $10$ до $15$:</p>

$$BEEF_{16} = 11 * 16^3 + 14 * 16^2 + 14 * 16^1 + 15 * 16^0 = 45056 + 3584 + 224 + 15 = 48879_{10}$$

<h3>Перевод чисел из одной позиционной системы в другую</h3>

<p>Так как речь идёт о переводе между системами счисления в информатике, нужно
сразу отметить важный момент. "Числа" в информатике могут быть представлены
разными типами данных: числами (<code>int</code>) и строками (<code>string</code>).
Можно сказать, что тип <code>int</code> не учитывает систему счисления чисел,
а хранит лишь их <em>значение</em> (что логично, ведь система счисления &ndash; это
всего лишь способ представления, или записи). Для работы с системами счисления
используются строки. Чтобы перевести число из одной системы счисления (<code>string</code>)
в другую (<code>string</code>), нужно сначала найти его <em>значение</em> (<code>int</code>),
а потом записать это значение в конечной системе счисления. Другими словами,
нужно выполнить два действия.</p>

<p>Давайте рассмотрим эти действия на примере: будем переводить числа из
12-ичной системы в 32-ичную. Сначала нам нужно найти <em>значение</em>
числа, представленного строкой в 12-ичной системе. Алгоритм тривиален:
просто выполним те же действия, которые мы разбирали в предыдущем разделе.</p>

<p>Реализация на C++:</p>

<pre class="prettyprint linenums">
//Перевод символа "цифры" в её значение.
int get_digit_value(char d) {
    if ('0' &lt;= d &amp;&amp; d &lt;= '9') {
        return d - '0';
    } else {
        return d - 'A';
    }
}

int get_number_value(string num) {
    int result = 0;

    int len = num.length();
    //Обрабатываем "цифры" справа налево,
    //каждая описывает коэффициент перед очередной степенью основания (12).
    for (int i = len - 1; i >= 0; i--) {
        result += get_digit_value(num[i]) * pow(12, len - 1 - i);
    }

    return result;
}
</pre>

<p>Выражение числа в 32-ичной системе счисления тоже выполняется тривиально.
Заметим следующее свойство:</p>

$$abcd_{32} = a * 32^3 + b * 32^2 + c * 32 + d,\ где\ d &lt; 32$$

<p>Давайте рассмотрим целую часть и остаток от деления числа на 32:</p>

$$\left\lfloor {abcd_{32} \over 32} \right\rfloor = a * 32^2 + b * 32 + c = abc_{32} \\
abcd_{32} \bmod 32 = d = d_{32}$$

<p>Это позволяет нам найти последнюю цифру числа, записать её, и откинуть. Для
записи всего числа просто будем повторять это действие, пока левая часть (все
цифры кроме последней) не станет равной нулю.</p>

<p>Реализация на C++:</p>
<pre class="prettyprint linenums">
//Перевод значения "цифры" в её символ.
int get_digit_char(int d) {
    if (d &lt; 10) {
        return '0' + d;
    } else {
        return 'A' + (d - 10);
    }
}

string convert_to_32(int num) {
    string result = "";

    while (num) {
        int last_digit = num % 32;
        result += get_digit_char(last_digit);   //При добавлении цифр в начало
                                                //пришлось бы каждый раз сдвигать все остальные.
                                                //Для избежания этого, мы добавляем цифры в конец,
                                                //а в конце просто разворачиваем строку.
        num /= 32;
    }

    reverse(result.begin(), result.end());
    return result;
}
</pre>

<p>Приведённые реализации легко модифицируются для любых начальных и конечных
оснований.</p>

<h3>Непозиционные системы счисления</h3>

<p>Иногда в задачах также фигурируют специфические системы счисления, значительно
отличающиеся от позиционных. Это может быть римская система, троичная
сбалансированная система, или любая другая, пришедшая в голову автору задачи.
Почти всегда в условиях таких задач приводится описание используемой системы,
которого должно быть достаточно для решения. Помните, что система счисления &ndash;
всего лишь способ записи числа, и такие задачи решаются так же, как и остальные
математические.</p>